{
    "widgets": [
        {
            "height": 6,
            "width": 12,
            "y": 0,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ { "expression": "AVG(SEARCH('goad AND error_connect', 'Sum', 1))", "id": "error_connect", "period": 1, "color": "#d62728", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('goad AND error_read',    'Sum', 1))", "id": "error_read",    "period": 1, "color": "#e377c2", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('goad AND status_5xx',    'Sum', 1))", "id": "status_5xx",    "period": 1, "color": "#ff9896", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('goad AND status_4xx',    'Sum', 1))", "id": "status_4xx",    "period": 1, "color": "#f7b6d2", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('goad AND status_2xx',    'Sum', 1))", "id": "status_2xx",    "period": 1, "color": "#98df8a", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('goad AND success',       'Sum', 1))", "id": "success",       "period": 1, "color": "#bcbd22", "region": "{{{region}}}" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "{{{region}}}",
                "stat": "Average",
                "period": 1,
                "title": "goad connection status",
                "yAxis": {
                    "left": {
                        "min": 0,
                        "max": 100
                    },
                    "right": {
                        "min": 0
                    }
                }
            }
        },
        {
            "height": 6,
            "width": 12,
            "y": 6,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ { "expression": "AVG(SEARCH('goad AND duration_max', 'Average', 1))", "id": "duration_max", "period": 1, "color": "#1f77b4", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('goad AND duration_avg', 'Average', 1))", "id": "duration_avg", "period": 1, "color": "#17becf", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('goad AND duration_min', 'Average', 1))", "id": "duration_min", "period": 1, "color": "#9edae5", "region": "{{{region}}}" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "{{{region}}}",
                "stat": "Average",
                "period": 1,
                "title": "goad response times",
                "yAxis": {
                    "left": {
                        "min": 0
                    },
                    "right": {
                        "min": 0,
                        "max": 100
                    }
                }
            }
        },
        {
            "height": 6,
            "width": 12,
            "y": 0,
            "x": 12,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "fisworkshop", "2xx", { "color": "#2ca02c" } ],
                    [ ".", "5xx" ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "{{{region}}}",
                "stat": "Average",
                "period": 1,
                "title": "nginx connection status",
                "yAxis": {
                    "left": {
                        "min": 0,
                        "max": 1
                    }
                }
            }
        },
        {
            "height": 6,
            "width": 12,
            "y": 12,
            "x": 12,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ { "expression": "SUM(SEARCH('CWAgent AND {{{asgName}}} AND netstat_tcp_established', 'Maximum', 1))", "id": "sum_tcp_established", "period": 1, "color": "#2ca02c", "region": "{{{region}}}" } ],
                    [ { "expression": "SUM(SEARCH('CWAgent AND {{{asgName}}} AND netstat_tcp_time_wait', 'Maximum', 1))", "id": "sum_tcp_time_wait", "period": 1, "color": "#d62728", "region": "{{{region}}}" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "{{{region}}}",
                "stat": "Average",
                "period": 1,
                "title": "network status",
                "yAxis": {
                    "left": {
                        "min": 0
                    },
                    "right": {
                        "min": 0
                    }
                }
            }
        },
        {
            "height": 6,
            "width": 12,
            "y": 6,
            "x": 12,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "fisworkshop", "duration" ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "{{{region}}}",
                "stat": "Average",
                "period": 1,
                "title": "nginx response time",
                "yAxis": {
                    "left": {
                        "min": 0
                    }
                }
            }
        },
        {
            "height": 6,
            "width": 12,
            "y": 12,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ { "expression": "AVG(SEARCH('CWAgent AND {{{asgName}}} AND cpu_usage_idle', 'Average', 1))", "id": "avg_cpu_idle", "period": 1, "color": "#2ca02c", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('CWAgent AND {{{asgName}}} AND cpu_usage_user', 'Average', 1))", "id": "avg_cpu_user", "period": 1, "color": "#1f77b4", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('CWAgent AND {{{asgName}}} AND cpu_usage_system', 'Average', 1))", "id": "avg_cpu_system", "period": 1, "color": "#ff7f0e", "region": "{{{region}}}" } ],
                    [ { "expression": "AVG(SEARCH('CWAgent AND {{{asgName}}} AND cpu_usage_iowait', 'Average', 1))", "id": "avg_cpu_iowait", "period": 1, "color": "#d62728", "region": "{{{region}}}" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "{{{region}}}",
                "stat": "Average",
                "period": 1,
                "title": "server cpu"
            }
        },
        {
            "height": 6,
            "width": 12,
            "y": 18,
            "x": 0,
            "type": "metric",
            "properties": {
                "metrics": [
                    [ "AWS/AutoScaling", "GroupMaxSize", "AutoScalingGroupName", "{{{asgName}}}" ],
                    [ ".", "GroupDesiredCapacity", ".", "." ],
                    [ ".", "GroupInServiceInstances", ".", "." ],
                    [ ".", "GroupMinSize", ".", ".", { "color": "#1f77b4" } ]
                ],
                "view": "timeSeries",
                "stacked": false,
                "region": "{{{region}}}",
                "stat": "Average",
                "period": 1,
                "title": "ASG number of instances",
                "yAxis": {
                    "left": {
                        "min": 0
                    }
                }
            }
        }
    ]
}
